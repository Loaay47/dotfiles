# bindkey -e will be emacs mode
bindkey -v
export KEYTIMEOUT=1

# Use vim keys in tab complete menu:
# bindkey -M menuselect '^h' vi-backward-char
# bindkey -M menuselect '^k' vi-up-line-or-history
# bindkey -M menuselect '^l' vi-forward-char
# bindkey -M menuselect '^j' vi-down-line-or-history
# bindkey -v '^?' backward-delete-char

# Change cursor shape for different vi modes
function zle-keymap-select {
  if [[ $KEYMAP == vicmd ]]; then
    echo -ne '\e[1 q'  # block
  else
    echo -ne '\e[1 q'  # block (same for insert too)
  fi
}
zle -N zle-keymap-select

function zle-line-init {
  echo -ne '\e[1 q'  # block at shell start
}
zle -N zle-line-init

preexec() { echo -ne '\e[1 q'; }  # block cursor before each command
